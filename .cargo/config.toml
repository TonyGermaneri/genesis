# Project Genesis - Cargo Configuration

[build]
# Use sccache if available
# rustc-wrapper = "sccache"

# Incremental compilation for dev builds
incremental = true

[target.x86_64-apple-darwin]
# Use default linker on macOS
# rustflags = ["-C", "link-arg=-fuse-ld=lld"]

[target.aarch64-apple-darwin]
# Apple Silicon native
rustflags = []

[target.x86_64-unknown-linux-gnu]
# Use lld on Linux if available
# rustflags = ["-C", "link-arg=-fuse-ld=lld"]

[alias]
# Development aliases
dev = "run --package genesis-engine"
test-all = "test --workspace"
lint = "clippy --workspace --all-targets -- -D warnings"
fmt-check = "fmt --all -- --check"
doc = "doc --workspace --no-deps"

# Agent validation loop (must pass all)
validate = ["fmt-check", "lint", "test-all"]

[env]
# Vulkan validation layers for debug builds
RUST_LOG = { value = "info,wgpu=warn,naga=warn", force = false }
WGPU_BACKEND = { value = "vulkan,metal,dx12", force = false }

[profile.dev]
opt-level = 1
debug = true
debug-assertions = true
overflow-checks = true
lto = false
panic = "unwind"
incremental = true
codegen-units = 256

[profile.dev.package."*"]
opt-level = 2

[profile.release]
opt-level = 3
debug = false
debug-assertions = false
overflow-checks = false
lto = "thin"
panic = "abort"
codegen-units = 1
strip = true

[profile.release-debug]
inherits = "release"
debug = true
strip = false

[profile.bench]
inherits = "release"
debug = true
